module.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(r,i){for(var u,a,f=0,c=[];f<r.length;f++)a=r[f],o[a]&&c.push.apply(c,o[a]),o[a]=0;for(u in i)e[u]=i[u];for(n&&n(r,i);c.length;)c.shift().call(null,t)};var r={},o={0:0};return t.e=function(e,n){if(0===o[e])return n.call(null,t);if(void 0!==o[e])o[e].push(n);else{o[e]=[n];var r=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.charset="utf-8",i.async=!0,i.src=t.p+""+e+".pictawall.sdk.min.js",r.appendChild(i)}},t.m=e,t.c=r,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),u=n(23),a=r(u),f=n(18),c=r(f),l=n(28),s=r(l),d=n(27),p=r(d),y=n(25),h=r(y),v=n(20),b=r(v),w=n(22),P=r(w),_=n(6),g=r(_),O=n(24),m=r(O),j=n(21),k=r(j);t["default"]=function(){return void 0===window.pictawall&&(window.pictawall={}),void 0===window.pictawall.Sdk&&(window.pictawall.Sdk=i["default"],window.pictawall.Sdk.models={AdModel:a["default"],AssetModel:c["default"],ChannelModel:s["default"],EventModel:p["default"],MessageModel:h["default"],UserModel:b["default"]},window.pictawall.Sdk.collections={AdCollection:P["default"],AssetCollection:g["default"],MessageCollection:m["default"],UserCollection:k["default"]},window.pictawall.Sdk.version="1.0.1"),window.pictawall.Sdk}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=r(o),u=n(4),a=r(u);a["default"].fetchDownloader=function(e){function t(){e({fetch:window.fetch.bind(window),Response:window.Response})}return window.fetch?t():void n.e(9,function(e){n(130),t()})},t["default"]=i["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var r=n(6)["default"],o=n(21)["default"],i=n(22)["default"],u=n(24)["default"];if(void 0===t)e.addCollection("users",new o(e)),e.addCollection("assets",new r(e)),e.addCollection("ads",new i(e)),e.addCollection("messages",new u(e));else{var a=!0,f=!1,c=void 0;try{for(var l,s=Object.getOwnPropertyNames(t)[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var d=l.value;e.addCollection(d,t[d](e))}}catch(p){f=!0,c=p}finally{try{!a&&s["return"]&&s["return"]()}finally{if(f)throw c}}}}function u(){try{var e=[];e.push(s["default"].loadFetchPolyfill()),"undefined"==typeof Symbol&&e.push(new Promise(function(e){n.e(1,function(t){e([n(29),n(48)])})}));var t=new Promise(function(e){return n(26)()?e():void n.e(2,function(t){n(67),e()})});return e.push(t),e.push(t.then(function(){return new Promise(function(e){return Map.prototype.toJSON?e():void n.e(3,function(t){e(n(87))})})})),Array.prototype.includes||e.push(new Promise(function(e){n.e(4,function(t){n(88).shim(),e()})})),Array.prototype.findIndex||e.push(new Promise(function(e){n.e(5,function(t){e(n(112))})})),Array.from||e.push(new Promise(function(e){n.e(6,function(t){e(n(115))})})),String.prototype.endsWith||e.push(new Promise(function(e){n.e(7,function(t){e(n(120))})})),Object.is||e.push(new Promise(function(e){n.e(7,function(t){Object.is=n(123),e()})})),"function"!=typeof WeakMap&&e.push(new Promise(function(e){n.e(8,function(t){n(124),e()})})),Promise.all(e)}catch(r){return Promise.reject(r)}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(3),c=r(f),l=n(4),s=r(l),d=n(5),p=r(d),y=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?"https://api.pictawall.com/v2.5":arguments[0];o(this,e),this.apiBaseUrl=t,this.polyfillPromise=u()}return a(e,[{key:"getEvent",value:function(e,t,r){var o=this;try{return this.polyfillPromise.then(function(){var u=n(27)["default"],a=new u(o,e,t);return i(a,r),Promise.all([a.fetch(),a.fetchCollections()]).then(function(){return a})})}catch(u){return Promise.reject(u)}}},{key:"getChannel",value:function(e,t,r){var o=this;try{return this.polyfillPromise.then(function(){var u=n(28)["default"],a=new u(o,e,t);return a.fetch().then(function(e){return i(e.event,r),e.event.fetchCollections()}).then(function(){return a})})}catch(u){return Promise.reject(u)}}},{key:"callApi",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e=c["default"].format(e,!0,t.pathParameters),e.endsWith("/")&&(e=e.slice(0,-1));var n=p["default"].stringify(t.queryParameters);return n&&(e+="?"+n),s["default"].fetch(this.apiBaseUrl+e,t)}}]),e}();t["default"]=y},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r={format:function(e,t){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;r>i;i++)o[i-2]=arguments[i];return 1===o.length&&"object"===n(o[0])&&(o=o[0]),e.replace(/{(\w+)}/g,function(e,n){return void 0===o[n]?t?"":e:o[n]})}};t["default"]=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={loadFetchPolyfill:function(){var e=this;if(this.fetch&&this.Response)return Promise.resolve(this.fetch);if(!this.fetchDownloader)throw new Error("Fetch Downloader not defined");return new Promise(function(t){e.fetchDownloader(function(n){var r=n.fetch,o=n.Response;e.fetch=r,e.Response=o,t(r)})})}};t["default"]=n},function(e,t){!function(e,t){function n(e){function t(e){var t=e.length;if(t){var r=e.indexOf("=");0>r&&(r=t);var o=decodeURIComponent(e.substr(0,r)),i=decodeURIComponent(e.substr(r+1));n[o]=i}}var n={};return e&&e.replace(/\+/g," ").split(/[&;]/).forEach(t),n}function r(e){function t(t){var r=e[t];if("undefined"!=typeof r&&null!==r&&!(r instanceof Function)){var o=encodeURIComponent(t)+"="+encodeURIComponent(r);n.push(o)}}var n=[];return"object"==typeof e&&null!==e&&Object.keys(e).map(t),n.join("&")}e||(e=t.qs={}),e.parse=n,e.stringify=r}("undefined"!=typeof t&&t,"undefined"!=typeof window?window:{})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function h(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},c=n(7),l=r(c),s=n(18),d=r(s),p=n(10),y=function(e){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=n.limit,u=void 0===r?100:r,a=n.orderBy,f=void 0===a?"date DESC":a,c=n.since,l=n.kind;o(this,t);var s=i(this,Object.getPrototypeOf(t).call(this,e.sdk,u,f));return s._event=e,s.apiPath="/events/"+e.getProperty("identifier")+"/assets/{assetId}",s.fetchParser=function(e){return e.data},s._sinceFilter=c,s._kindFilter=l,s._orderBy=f,s}return u(t,e),a(t,[{key:"hasFeaturedAsset",value:function(){var e=this._event.getProperty("featuredAssetId");if(void 0===e)throw new p.SdkError(this,"Event.featuredAssetId is undefined, make sure the event has been populated.");return-1!==e}},{key:"getFeaturedAsset",value:function(){try{if(!this.hasFeaturedAsset())return Promise.resolve(null);var e=this.findOne({featured:!0});return null!=e?Promise.resolve(e):this.fetchById(this._event.getProperty("featuredAssetId"))}catch(t){return Promise.reject(t)}}},{key:"fetchById",value:function(e){var t=this;return this.fetchRaw(null,{assetId:e}).then(function(e){return t.buildModel(e)})}},{key:"createModel",value:function(){return new d["default"](this._event)}},{key:"fetchOptions",get:function(){var e=f(Object.getPrototypeOf(t.prototype),"fetchOptions",this);return this._sinceFilter&&(e.since=this._sinceFilter),this._kindFilter&&(e.kind=this._kindFilter),this._orderBy&&(e.order_by=this._orderBy),e}}]),t}(l["default"]);t["default"]=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function p(e,t,n,r){var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var i=Object.getPrototypeOf(e);null!==i&&p(i,t,n,r)}else if("value"in o&&o.writable)o.value=n;else{var u=o.set;void 0!==u&&u.call(r,n)}return n},c=function y(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:y(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},l=n(8),s=r(l),d=function(e){function t(e,n){o(this,t);var r=i(this,Object.getPrototypeOf(t).call(this,e));return r._limit=n,r._currentPage=0,r._pageCount=null,r._total=null,r}return u(t,e),a(t,[{key:"hasMore",value:function(){return 0===this._currentPage||this._currentPage<this._pageCount}},{key:"_parse",value:function(e){e.currentPage>this._currentPage&&(this._currentPage=e.currentPage),this._pageCount=e.pageCount,this._total=e.total}},{key:"fetchOptions",get:function(){var e=c(Object.getPrototypeOf(t.prototype),"fetchOptions",this);return e.page=this._currentPage+1,this._limit&&(e.limit=this._limit),e}},{key:"fetchParser",set:function(e){f(Object.getPrototypeOf(t.prototype),"fetchParser",e,this)},get:function(){var e=c(Object.getPrototypeOf(t.prototype),"fetchParser",this),n=this;return function(t){return n._parse(t),e?e(t):t}}},{key:"total",get:function(){return this._total}}]),t}(s["default"]);t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(9),a=r(u),f=n(10),c=n(11),l=r(c),s=n(12),d=r(s),p=function(){function e(t){if(o(this,e),this._loaded=!1,void 0===t)throw new f.SdkError(this,"This model did not receive a SDK instance.");this.sdk=t,this._models=[]}return i(e,[{key:"buildModel",value:function(e){var t=this.createModel();return t.setProperties(e),t}},{key:"createModel",value:function(){throw new f.SdkError("CreateModel not implemented")}},{key:"fetch",value:function(){var e=this;return this.hasMore?this.fetchRaw(this.fetchOptions).then(function(t){if(!Array.isArray(t))throw new f.SdkError(e,'Invalid response from the http API. Should have returned array, got "'+JSON.stringify(t)+'"');return t.forEach(function(t){e.add(e.buildModel(t),!0,!1)}),e._loaded=!0,e}):Promise.reject(new f.SdkError(this,"#fetch called but #hasMore returns false"))}},{key:"add",value:function(e){arguments.length<=1||void 0===arguments[1]?!0:arguments[1],arguments.length<=2||void 0===arguments[2]?!0:arguments[2];this._models.push(e)}},{key:"toJSON",value:function(){return this._models}},{key:"at",value:function(e){return this._models[e]}},{key:Symbol.iterator,value:function(){var e=this;return{next:function(){return this._index>=e.length?{done:!0}:{done:!1,value:e.at(this._index++)}},_index:0}}},{key:"fetchOptions",get:function(){return{}}},{key:"length",get:function(){return this._models.length}},{key:"loaded",get:function(){return this._loaded}},{key:"hasMore",get:function(){return!this._loaded}}]),e}();a["default"].merge(p,l["default"],d["default"]),t["default"]=p},function(e,t,n){"use strict";function r(e,t){if(t!==Object.prototype){var n=Object.getPrototypeOf(t);null!=t&&r(e,n);var o=e.prototype;Object.getOwnPropertyNames(t).forEach(function(e){if("constructor"!==e){if(void 0!==Object.getOwnPropertyDescriptor(o,e))throw new i.PictawallError(u,"Merge error, method "+e+" is already in the receiving prototype.");Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(t,e))}})}}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=n(10),u={getName:function(e){if(null==e)return String(e);var t=void 0;if("function"==typeof e)t=e.name;else{var n=Object.getPrototypeOf(e);t=n.constructor.name}return t?t:"nameless"},merge:function(e){if("function"!=typeof e)throw new Errors.SdkError(this,"Receiving Class is not a function");for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];for(var u=0;u<n.length;u++){var a=n[u];if(null==a)throw new Errors.SdkError(this,"Invalid mixin n° "+u+", not defined.");if("object"===("undefined"==typeof a?"undefined":o(a)))r(e,a);else{if("function"!=typeof a)throw new Errors.SdkError(this,"Invalid type for mixin n° "+u+", only functions and objects are accepted as mixins.");r(e,a.prototype)}}return e}};Object.freeze(u),t["default"]=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SdkError=t.PictawallError=void 0;var a=n(9),f=r(a),c=t.PictawallError=function(e){function t(e,n,r,u){o(this,t);var a=i(this,Object.getPrototypeOf(t).call(this,"["+f["default"].getName(e)+"] "+n,r,u));return a.name=a.constructor.name,a}return u(t,e),t}(Error);t.SdkError=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),u=0;n>u;u++)r[u]=arguments[u];return i(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)))}return u(t,e),t}(c)},function(e,t,n){"use strict";function r(e,t){for(var n in t){var r=t[n];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n,r)}return e}Object.defineProperty(t,"__esModule",{value:!0});var o,i,u,a=n(10),f=new WeakMap,c=(i={fetchRaw:function(e,t){var n=this;if(!this.apiPath)throw new a.SdkError(this,"Property apiPath has not been set.");var r=this.sdk.callApi(this.apiPath,{queryParameters:e,pathParameters:t}).then(function(e){if(!e.ok)throw new a.SdkError(n,"API responded with http code "+e.status+' for endpoint "'+e.url+'"');return e.json()}),o=this.fetchParser;return o?r.then(function(e){return o(e)}):r},set fetchParser(e){f.set(this,e)}},o="fetchParser",u={},u[o]=u[o]||{},u[o].get=function(){return f.get(this)},r(i,u),i);t["default"]=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(13),i=r(o),u={findOne:function(e){return this.find(e).limit(1).first()},find:function(e){return new i["default"](e,this)}};t["default"]=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=Array.from(e.iterable);if(e.sortQuery){var n=e.sortQuery;if(n.$natural)-1===n.$natural&&t.reverse();else{var r="function"==typeof n?n:(0,f["default"])(n);t.sort(r)}}if(void 0===e.query)return e.startAt||e.limit?t.splice(e.startAt||0,e.limit||t.length):t;for(var o="function"==typeof e.query?e.query:(0,l["default"])(e.query),i=[],u=e.startAt||0;u<t.length&&!(e.limit&&i.length>=e.limit);u++){var a=t[u];o(a)&&i.push(a)}return i}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(14),f=r(a),c=n(16),l=r(c),s=new WeakMap,d=function(){function e(t,n){o(this,e),s.set(this,{query:t,iterable:n})}return u(e,[{key:"limit",value:function(e){return this._ensurePending(),s.get(this).limit=e,this}},{key:"skip",value:function(e){return this._ensurePending(),s.get(this).startAt=e,this}},{key:"sort",value:function(e){return this._ensurePending(),s.get(this).sortQuery=e,this}},{key:"toArray",value:function(){var e=s.get(this);return void 0===e.result&&(e.result=i(e)),e.result}},{key:"first",value:function(){return this.toArray()[0]||null}},{key:"forEach",value:function(e){return this.toArray().forEach(e),this}},{key:"_ensurePending",value:function(){if(this._ready())throw new Error("Cannot change the limit after the query has been executed.")}},{key:"_ready",value:function(){return void 0!==s.get(this).result}}]),e}();t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){var r=!0,a=!1,c=void 0;try{for(var l,s=Object.getOwnPropertyNames(n)[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var d=l.value,p=n[d],y=f["default"].find(e,d),h=f["default"].find(t,d),v=void 0;if(v="object"===("undefined"==typeof p?"undefined":u(p))?o(y,h,p):i(y,h,p),0!==v)return v}}catch(b){a=!0,c=b}finally{try{!r&&s["return"]&&s["return"]()}finally{if(a)throw c}}}function i(e,t,n){return e===t?0:e>t?n:-n}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t["default"]=function(e){return function(t,n){return o(t,n,e)}};var a=n(15),f=r(a)},function(e,t){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={find:function(e,t){for(var n=t.split("."),r=0;r<n.length;r++){if(void 0===e)return;e=e[n[r]]}return e},exists:function(e,t){return void 0!==this.find(e,t)},get global(){return"undefined"!=typeof window?window:"undefined"!=typeof e?e:void 0}};t["default"]=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if("object"!==("undefined"==typeof t?"undefined":i(t))||Array.isArray(t))return l.eq(e,t);var n=!0,r=!1,u=void 0;try{for(var a,f=Object.getOwnPropertyNames(t)[Symbol.iterator]();!(n=(a=f.next()).done);n=!0){var s=a.value,d=t[s];if("$"===s.charAt(0)){var p=l[s.substr(1)];if(void 0===p)throw new Error('Unknown WHERE selector "'+s+'"');if(!p(e,d))return!1}else{var y=c["default"].find(e,s);if(!o(y,d))return!1}}}catch(h){r=!0,u=h}finally{try{!n&&f["return"]&&f["return"]()}finally{if(r)throw u}}return!0}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t["default"]=function(e){return function(t){return t.toJSON&&(t=t.toJSON()),o(t,e)}};var u=n(17),a=r(u),f=n(15),c=r(f),l={eq:function(e,t){return Array.isArray(e)||Array.isArray(t)?a["default"].areEqual(e,t):0===e&&0===t||Object.is(e,t)},gt:function(e,t){return e>t},gte:function(e,t){return e>=t},lt:function(e,t){return t>e},lte:function(e,t){return t>=e},ne:function(e,t){return!l.eq(e,t)},"in":function(e,t){if(!Array.isArray(t))throw new Error('$in and $nin require an Array, got "'+t+'".');var n=!0,r=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var a=i.value;if(l.eq(e,a))return!0}}catch(f){r=!0,o=f}finally{try{!n&&u["return"]&&u["return"]()}finally{if(r)throw o}}return!1},nin:function(e,t){return!l["in"](e,t)},or:function(e,t){if(!Array.isArray(t))throw new Error('$or and $nor require an Array, got "'+t+'".');var n=!0,r=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(n=(u=a.next()).done);n=!0){var f=u.value;if(o(e,f))return!0}}catch(c){r=!0,i=c}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}return!1},nor:function(e,t){return!l.or(e,t)},and:function(e,t){if(!Array.isArray(t))throw new Error('$and requires an Array, got "'+t+'".');var n=!0,r=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(n=(u=a.next()).done);n=!0){var f=u.value;if(!o(e,f))return!1}}catch(c){r=!0,i=c}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}return!0},not:function(e,t){return!o(e,t)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={areEqual:function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},isIterable:function(e){return null==e?!1:void 0!==e[Symbol.iterator]}};t["default"]=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function v(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:v(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},l=n(19),s=r(l),d=n(20),p=r(d),y=n(10),h=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e.sdk));if("object"!==("undefined"==typeof e?"undefined":a(e)))throw new y.SdkError(n,"event must be an EventModel.");return n._event=e,n.fetchParser=function(e){return e.data},n}return u(t,e),f(t,[{key:"setProperties",value:function(e){Array.isArray(e.source.additionalData)&&(e.source.additionalData={});var n=this._event.getCollection("users");if(this._owner=null!=n?n.findOne({id:e.owner.id}):null,null===this._owner){var r=new p["default"](this._event);r.setProperties(e.owner),null!=n?this._owner=n.add(r,!1,!1):this._owner=r}return this.apiPath="/events/"+this._event.getProperty("identifier")+"/assets/"+e.id,c(Object.getPrototypeOf(t.prototype),"setProperties",this).call(this,e)}},{key:"setProperty",value:function(e,n){"id"===e&&(this.apiPath="/events/"+this._event.getProperty("identifier")+"/assets/"+n),c(Object.getPrototypeOf(t.prototype),"setProperty",this).call(this,e,n)}},{key:"markMediaAsDead",value:function(){var e=this;return this.sdk.callApi(this.apiPath+"/check",{method:"PATCH"}).then(function(){return e})}},{key:"report",value:function(){var e=this;return this.isSafe?Promise.resolve(this):this.sdk.callApi(this.apiPath+"/report",{method:"PATCH"}).then(function(){return e})}},{key:"owner",get:function(){return this._owner}},{key:"isSafe",get:function(){return this.getProperty("isSafe")}}]),t}(s["default"]);t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(11),f=r(a),c=n(9),l=r(c),s=n(10),d=new WeakMap,p=function(){function e(t){o(this,e),d.set(this,new Map),this.sdk=t}return u(e,[{key:"setProperties",value:function(e){if("object"!==("undefined"==typeof e?"undefined":i(e)))throw new s.SdkError(this,'Invalid newProperties value "'+e+'". This might be due to the server returning an invalid value, you can modify it using a fetch parser.');var t=d.get(this);t.clear();var n=!0,r=!1,o=void 0;try{for(var u,a=Object.getOwnPropertyNames(e)[Symbol.iterator]();!(n=(u=a.next()).done);n=!0){var f=u.value,c=e[f];t.set(f,c)}}catch(l){r=!0,o=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw o}}return this}},{key:"setProperty",value:function(e,t){return d.get(this).set(e,t),this}},{key:"getProperty",value:function(e){return d.get(this).get(e)}},{key:"toJSON",value:function(){return d.get(this).toJSON()}},{key:"fetch",value:function(e){var t=this;return this.fetchRaw(e).then(function(e){return t.setProperties(e),t})}}]),e}();l["default"].merge(p,f["default"]),t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function d(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:d(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},c=n(19),l=r(c),s=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e.sdk));return n._event=e,n.fetchParser=function(e){return e.data},n}return u(t,e),a(t,[{key:"setProperties",value:function(e){return this.apiPath="/events/"+this._event.getProperty("identifier")+"/users/"+e.id,f(Object.getPrototypeOf(t.prototype),"setProperties",this).call(this,e)}},{key:"setProperty",value:function(e,n){"id"===e&&(this.apiPath="/events/"+this._event.getProperty("identifier")+"/users/"+n),f(Object.getPrototypeOf(t.prototype),"setProperty",this).call(this,e,n)}},{key:"markAvatarAsDead",value:function(){var e=this;return this.sdk.callApi(this.apiPath+"/check",{method:"PATCH"}).then(function(){return e})}}]),t}(l["default"]);t["default"]=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(7),c=r(f),l=n(20),s=r(l),d=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e.sdk,5,"score"));return n._event=e,n.apiPath="/events/"+e.getProperty("identifier")+"/users/{userId}",n.fetchParser=function(e){return e.data},n}return u(t,e),a(t,[{key:"add",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=(arguments.length<=2||void 0===arguments[2]?!0:arguments[2],this._models.findIndex(function(t){return t.getProperty("id")===e.getProperty("id")}));return-1===n?(this._models.push(e),e):t?(this._models[n]=e,e):this._models[n]}},{key:"createModel",value:function(){return new s["default"](this._event)}}]),t}(c["default"]);t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(8),c=r(f),l=n(23),s=r(l),d=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e.sdk));
return n.apiPath="/events/"+e.getProperty("identifier")+"/ads/{adId}",n.fetchParser=function(e){return e.data},n}return u(t,e),a(t,[{key:"createModel",value:function(){return new s["default"](this.sdk)}}]),t}(c["default"]);t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),f=r(a),c=function(e){function t(e){return o(this,t),i(this,Object.getPrototypeOf(t).call(this,e))}return u(t,e),t}(f["default"]);t["default"]=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(8),c=r(f),l=n(25),s=r(l),d=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e.sdk));return n.apiPath="/events/"+e.getProperty("identifier")+"/ads/{adId}",n.fetchParser=function(e){return e.data},n}return u(t,e),a(t,[{key:"createModel",value:function(){return new s["default"](this.sdk)}}]),t}(c["default"]);t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),f=r(a),c=function(e){function t(e){return o(this,t),i(this,Object.getPrototypeOf(t).call(this,e))}return u(t,e),t}(f["default"]);t["default"]=c},function(e,t){"use strict";e.exports=function(){var e,t,n;if("function"!=typeof Map)return!1;try{e=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(r){return!1}return"[object Map]"!==String(e)?!1:3!==e.size?!1:"function"!=typeof e.clear?!1:"function"!=typeof e["delete"]?!1:"function"!=typeof e.entries?!1:"function"!=typeof e.forEach?!1:"function"!=typeof e.get?!1:"function"!=typeof e.has?!1:"function"!=typeof e.keys?!1:"function"!=typeof e.set?!1:"function"!=typeof e.values?!1:(t=e.entries(),n=t.next(),n.done!==!1?!1:n.value?"raz"!==n.value[0]?!1:"one"===n.value[1]:!1)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(19),c=r(f),l=n(10),s=new WeakMap,d=function(e){function t(e,n){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];r.autoUpdate,r.autoUpdateVelocity;o(this,t);var u=i(this,Object.getPrototypeOf(t).call(this,e));if("string"!=typeof n)throw new l.SdkError(u,'Event identifier "'+n+'" is not valid.');return u.setProperty("identifier",n),u.apiPath="/events/"+n,u.fetchParser=function(e){return e.data},s.set(u,new Map),u}return u(t,e),a(t,[{key:"fetchCollections",value:function(){var e=[];return s.get(this).forEach(function(t){e.push(t.fetch())}),Promise.all(e)}},{key:"addCollection",value:function(e,t){var n=s.get(this);if(n.has(e))throw new l.SdkError(this,"Collection "+e+" already registered for this event");return n.set(e,t),this}},{key:"getCollection",value:function(e){var t=s.get(this);return t.get(e)}}]),t}(c["default"]);t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function h(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},c=n(19),l=r(c),s=n(27),d=r(s),p=n(10),y=function(e){function t(e,n,r){o(this,t);var u=i(this,Object.getPrototypeOf(t).call(this,e));if("string"!=typeof n)throw new p.SdkError(u,'Channel identifier "'+n+'" is not valid.');return u._eventConfig=r,u.apiPath="/channels/"+n,u.fetchParser=function(e){return e.data},u}return u(t,e),a(t,[{key:"setProperties",value:function(e){var n=e.event;return this._event=new d["default"](this.sdk,n.identifier,this._eventConfig),this._event.setProperties(n),Array.isArray(e.properties)&&(e.properties={}),f(Object.getPrototypeOf(t.prototype),"setProperties",this).call(this,e)}},{key:"event",get:function(){return this._event}}]),t}(l["default"]);t["default"]=y}]);